以下是需求文档：

1、实现一个类似OpenResty的代理服务，用户通过该代理服务调用渠道API接口，调用链路：用户-->代理服务-->渠道。

2、代理服务需要支持API-Key替换功能，即：用户使用代理API-Key，代理服务将其替换为真实的渠道API-Key，然后调用渠道API接口。

3、代理服务需要支持统计功能，统计各种维度的数据，如：请求次数、消费token数量等。

4、代理服务需要支持WebSocket协议，用于实时API调用。

5、代理服务需要支持配置管理，如：API-Key映射配置、渠道配置等。

6、代理服务需要支持日志记录，记录所有API调用日志。

7、代理服务需要支持监控和告警功能。

8、代理服务需要支持多渠道，如：OpenAI、百炼等。

9、代理服务需要支持负载均衡，将请求分发到多个渠道实例。

10、代理服务需要支持故障转移，当某个渠道实例不可用时，自动切换到其他实例。

11、代理服务需要支持限流功能，防止恶意攻击。

12、代理服务需要支持缓存功能，提高响应速度。

13、代理服务需要支持安全功能，如：API-Key加密存储、HTTPS支持等。

14、代理服务需要支持扩展功能，如：插件机制、自定义处理逻辑等。

1、考虑到实现和维护成本，基于OpenResty+Lua脚本实现。